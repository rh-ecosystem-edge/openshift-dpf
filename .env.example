# Cluster Configuration
CLUSTER_NAME=edge-demo-cluster
BASE_DOMAIN=example.com
OPENSHIFT_VERSION=4.20.4

# Directory Configuration
MANIFESTS_DIR=manifests
GENERATED_DIR=manifests/generated
POST_INSTALL_DIR=manifests/post-installation
GENERATED_POST_INSTALL_DIR=manifests/generated/post-install
SSH_KEY=~/.ssh/id_rsa

# DPF Configuration
DPF_VERSION=v25.7.1
DPF_HELM_REPO_URL=https://helm.ngc.nvidia.com/nvidia/doca/dpf-operator
OVN_CHART_URL=oci://ghcr.io/mellanox/charts
OVN_TEMPLATE_CHART_URL=oci://ghcr.io/mellanox/charts
OVN_CHART_VERSION=v25.7.1-f073927

OVN_KUBERNETES_IMAGE_REPO=quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256
OVN_KUBERNETES_IMAGE_TAG=780d11fac73412276b312b3f7c879b5e63da9687c7c8e79fc142e9c6e2f7c4cf
OVN_KUBERNETES_UTILS_IMAGE_REPO=ghcr.io/mellanox/ovn-kubernetes-dpf-utils
OVN_KUBERNETES_UTILS_IMAGE_TAG=v25.7.1-f073927

# GitOps Operator Configuration
GITOPS_OPERATOR_CHANNEL=1.16
GITOPS_OPERATOR_VERSION=v1.16.3

# Storage Configuration for Hypershift etcd
# STORAGE_TYPE: Choose storage backend for Hypershift etcd
#   - lvm: Logical Volume Manager Storage (default, works for SNO and MNO)
#   - odf: OpenShift Data Foundation (multi-node only, requires 3+ nodes)
#STORAGE_TYPE=lvm

# OLM Catalog Source Configuration
# USE_V419_WORKAROUND: Set to true when operators (NFD, SR-IOV, LSO, ODF) are not
# available in the standard redhat-operators catalog for your OpenShift version.
# This deploys a v4.19 catalog source as a fallback.
#USE_V419_WORKAROUND=false

# NFD Image (optional - can be overridden if needed)
#NFD_OPERAND_IMAGE=quay.io/yshnaidm/node-feature-discovery:dpf

# Hypershift Configuration
HYPERSHIFT_IMAGE=quay.io/hypershift/hypershift-operator:latest
HOSTED_CLUSTER_NAME=doca
CLUSTERS_NAMESPACE=clusters
HOSTED_CONTROL_PLANE_NAMESPACE=clusters-doca
OCP_RELEASE_IMAGE=quay.io/openshift-release-dev/ocp-release:4.20.4-multi

# Cluster Manager Configuration
DPF_CLUSTER_TYPE=hypershift

# Network Configuration
POD_CIDR=10.128.0.0/14
SERVICE_CIDR=172.30.0.0/16
DPU_INTERFACE=ens7f0np0
DPU_OVN_VF=ens7f0v1
DPU_HOST_CIDR=10.6.130.0/24
HBN_OVN_NETWORK=10.6.150.0/27

INJECTOR_RESOURCE_NAME=openshift.io/bf3-p0-vfs

# Pull Secret files
OPENSHIFT_PULL_SECRET=openshift_pull.json
DPF_PULL_SECRET=pull-secret.txt

# VM Configuration
VM_PREFIX=vm-dpf
VM_COUNT=3
RAM=41984
VCPUS=14
DISK_SIZE1=120
DISK_SIZE2=80

# Network Configuration (VIPs)
API_VIP=10.1.150.100
INGRESS_VIP=10.1.150.101

# Wait Configuration
MAX_RETRIES=90
SLEEP_TIME=60

# Paths
DISK_PATH=/var/lib/libvirt/images
ISO_FOLDER=/var/lib/libvirt/images
#ISO_TYPE=full

BFB_URL=http://bfb.example.com/rhcos_4.20.0-ec.4_coreos-installer_2025-07-17.bfb

# Kubeconfig
KUBECONFIG=./kubeconfig

STATIC_NET_FILE="./configuration_templates/static_net.yaml"
#NODES_MTU=9000

# For DPF sanity tests script
SANITY_TESTS_PODS_WORKLOAD_FILE=manifests/post-installation-manual/workload.yaml
SANITY_TESTS_WORKLOAD_NAMESPACE=workload
SANITY_TESTS_PING_COUNT=20
SANITY_TESTS_PING_HBN_TO_HBN_PODS=false

# =============================================================================
# Worker Node Provisioning Configuration
# =============================================================================
# Automated provisioning of worker nodes via Bare Metal Operator (BMO) and Redfish.
# Auto-discovery for all Redfish BMCs. Let ironic figure out vendor-specific paths.

# Number of workers to provision (0 = skip worker provisioning)
WORKER_COUNT=0

# Worker 1 Configuration (uncomment and set WORKER_COUNT=1)
#WORKER_1_NAME=openshift-worker-1
#WORKER_1_BMC_IP=192.168.1.101
#WORKER_1_BMC_USER=root
#WORKER_1_BMC_PASSWORD=calvin
#WORKER_1_BOOT_MAC=aa:bb:cc:dd:ee:01
#WORKER_1_ROOT_DEVICE=/dev/sda

# Worker 2 Configuration (uncomment and set WORKER_COUNT=2)
#WORKER_2_NAME=openshift-worker-2
#WORKER_2_BMC_IP=192.168.1.102
#WORKER_2_BMC_USER=root
#WORKER_2_BMC_PASSWORD=calvin
#WORKER_2_BOOT_MAC=aa:bb:cc:dd:ee:02
#WORKER_2_ROOT_DEVICE=/dev/sda

# Variable descriptions:
#   WORKER_n_NAME        - Worker hostname (must be unique per worker)
#   WORKER_n_BMC_IP      - BMC/iDRAC IP address for Redfish API access
#   WORKER_n_BMC_USER    - BMC username for authentication
#   WORKER_n_BMC_PASSWORD - BMC password for authentication
#   WORKER_n_BOOT_MAC    - Boot NIC MAC address (used for PXE/network boot)
#   WORKER_n_ROOT_DEVICE - Target installation disk device path

# CSR Auto-Approval (SECURITY WARNING)
# Set to 'true' for fully hands-off provisioning.
# WARNING: Only enable in trusted environments. Automatically approves
# certificate signing requests from worker nodes.
AUTO_APPROVE_WORKER_CSR=false

# CSR approval timeout in seconds (default: 600 = 10 minutes)
# Only used when AUTO_APPROVE_WORKER_CSR=true
CSR_APPROVAL_TIMEOUT=600
